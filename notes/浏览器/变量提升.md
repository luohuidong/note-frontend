JavaScript 的变量提升是一个比较有意思的东西。变量提升所产生的行为会导致 JavaScript 的执行结果与其他的编程语言所表现的不太一样，因此初学者往往会对此感到迷惑。

看一段涉及变量提升的代码：

```js
bar()
console.log(foo)
var foo = 'foo'
function bar() {
  console.log('bar')
}
```

上面的代码执行结果是 `bar` 和 `undefined`，这个输出结果可能不太好理解。用下面的代码来模拟上面的代码，可以更好地理解 JavaScript 的变量提升：

```js
/**变量提升部分 */
// 变量 foo 提升到开头
var foo = undefined
// 函数 bar 提升到开头
function bar() {
  console.log('bar')
}

/** 可执行代码部分 */
bar()
console.log(foo)
foo = 'foo'
```

这段模拟的代码输出的结果与开头给的例子输出的结果一模一样，这应该能明白为什么在定义之前能够使用变量或者函数。

## JavaScript 代码执行流程

虽然模拟代码能很好地理解变量提升，但实际上 JavaScript 在执行的过程中并不会发生代码位置变化的情况。为了探究变量提升的真实原因，我们需要了解 JavaScript 代码执行流程。





## 执行上下文

执行上下文是 JavaScript 执行一段代码时的运行环境，比如调用一个函数，就会进入这个函数的执行上下文，确定该函数在执行期间用到的诸如 this、变量、对象以及函数等。

![](https://cdn.luohuidong.cn/Pasted%20image%2020240318101002.png)




## 参考资料

- [浏览器工作原理与实践：07 | 变量提升：JavaScript代码是按顺序执行的吗？](https://time.geekbang.org/column/article/119046)
